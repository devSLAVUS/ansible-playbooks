# üöÄ Ansible Playbook for Infrastructure Setup

–≠—Ç–æ—Ç Ansible-–ø–ª–µ–π–±—É–∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –≤–∫–ª—é—á–∞—è:

- **–ù–∞—Å—Ç—Ä–æ–π–∫—É NAT** –Ω–∞ `vm1` (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä).
- **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞** –Ω–∞ `vm2` –∏ `vm3` –¥–ª—è –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —á–µ—Ä–µ–∑ `vm1`.
- **–ù–∞—Å—Ç—Ä–æ–π–∫—É —Å–µ—Ç–∏** —Å Netplan.
- **–£—Å—Ç–∞–Ω–æ–≤–∫—É Docker –∏ –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–æ–≤**.
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Jump Host (`vm1`) –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ `vm2` –∏ `vm3`**.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `ansible/`
  - `inventory/`
    - `hosts.yml` ‚Äì –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (—Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤)
    - `group_vars/`
      - `all.yml` ‚Äì –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      - `router.yml` ‚Äì –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞
      - `workers.yml` ‚Äì –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è worker-–Ω–æ–¥
  - `playbooks/`
    - `nat_setup.yml` ‚Äì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NAT
    - `gateway_setup.yml` ‚Äì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
    - `base_setup.yml` ‚Äì –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (Docker –∏ —Ç. –¥.)
  - `roles/`
    - `nat/`
      - `tasks/main.yml` ‚Äì –†–æ–ª—å NAT
    - `gateway/`
      - `tasks/main.yml` ‚Äì –†–æ–ª—å –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
    - `base/`
      - `tasks/main.yml` ‚Äì –†–æ–ª—å –¥–ª—è –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
  - `ansible.cfg` ‚Äì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Ansible
  - `README.md` ‚Äì –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø–ª–µ–π–±—É–∫–æ–≤ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–¥–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export ANSIBLE_JUMP_HOST="your-public-ip"
export ANSIBLE_PRIVATE_KEY="/path/to/private_key.pem"